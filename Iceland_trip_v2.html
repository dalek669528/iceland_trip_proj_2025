<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†°å³¶ä¹‹æ—…å®Œæ•´å„€è¡¨æ¿</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem;
        }

        .tab-btn.active {
            @apply bg-blue-600 text-white shadow-lg;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .sidebar-nav-btn.active {
            @apply bg-blue-200;
        }
    </style>
</head>

<body class="bg-gray-100">

    <div class="dashboard-container">
        <!-- Header Section -->
        <header class="text-center py-8">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-blue-900 mb-2">å†°å³¶12æ—¥è‡ªé§•ä¹‹æ—…</h1>
            <p class="text-md sm:text-lg text-gray-600">å®Œæ•´è¡Œç¨‹å„€è¡¨æ¿ï¼Œè¼•é¬†æŒæ¡æ‚¨çš„æ—…ç¨‹ã€‚</p>
            <div class="mt-4 flex flex-wrap justify-center items-center text-sm text-gray-500 space-x-2 sm:space-x-4">
                <span>å‡ºç™¼ï¼š10/10</span>
                <span>å›ç¨‹ï¼š10/22</span>
                <span class="text-blue-500 font-semibold">12æ—¥è¡Œç¨‹</span>
            </div>
        </header>

        <!-- Main Dashboard Content -->
        <main class="bg-white p-4 sm:p-6 rounded-3xl shadow-2xl border border-gray-200">
            <!-- Tabs Navigation -->
            <nav class="flex justify-center mb-6 border-b border-gray-200 overflow-x-auto">
                <button data-tab="itinerary" class="tab-btn active flex-shrink-0 px-4 py-2 sm:px-6 sm:py-3 text-md sm:text-lg font-semibold rounded-t-xl transition-all duration-300">è¡Œç¨‹</button>
                <button data-tab="accommodation" class="tab-btn flex-shrink-0 px-4 py-2 sm:px-6 sm:py-3 text-md sm:text-lg font-semibold rounded-t-xl transition-all duration-300">ä½å®¿</button>
                <button data-tab="memo" class="tab-btn flex-shrink-0 px-4 py-2 sm:px-6 sm:py-3 text-md sm:text-lg font-semibold rounded-t-xl transition-all duration-300">å¾…è¾¦äº‹é …</button>
            </nav>

            <!-- Itinerary Tab Content -->
            <div id="itinerary-tab" class="tab-content active grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Day Navigation Sidebar -->
                <aside class="bg-gray-50 p-4 rounded-2xl border border-gray-200 lg:col-span-1">
                    <h2 class="text-xl font-bold mb-4 text-blue-900">æ¯æ—¥è¡Œç¨‹</h2>
                    <nav>
                        <ul id="day-nav-list" class="flex flex-row overflow-x-auto lg:flex-col lg:overflow-x-visible space-x-2 lg:space-x-0 lg:space-y-2 pb-2 -mr-2">
                            <!-- Day navigation items generated by JS -->
                        </ul>
                    </nav>
                </aside>

                <!-- Itinerary Details and Chart -->
                <section class="lg:col-span-2">
                    <div class="bg-white p-4 sm:p-6 rounded-2xl shadow-lg border border-gray-200">
                        <div class="mb-6 border-b pb-4">
                            <h2 id="current-day-title" class="text-2xl sm:text-3xl font-extrabold text-blue-800 mb-1"></h2>
                            <p id="current-day-theme" class="text-md sm:text-lg text-gray-600"></p>
                        </div>
                        
                        <!-- Itinerary Cards (Mobile-first table replacement) -->
                        <div id="itinerary-cards-container" class="space-y-4">
                            <!-- Itinerary details rendered as cards by JS -->
                        </div>

                        <!-- Time Allocation Chart -->
                        <div class="mt-8">
                            <h3 class="text-xl font-bold text-blue-900 mb-4">ç•¶æ—¥æ™‚é–“åˆ†é…</h3>
                            <div class="flex justify-center items-center">
                                <canvas id="timeChart" class="max-w-xs h-auto"></canvas>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Accommodation Tab Content -->
            <div id="accommodation-tab" class="tab-content grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Accommodation cards rendered by JS -->
            </div>

            <!-- To-Do/Memo Tab Content -->
            <div id="memo-tab" class="tab-content grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                    <h2 class="text-xl font-bold mb-4 text-blue-900">å¾…è¾¦äº‹é …</h2>
                    <ul id="todo-list" class="space-y-4 text-gray-700">
                        <!-- To-do items rendered by JS -->
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                    <h2 class="text-xl font-bold mb-4 text-blue-900">å‚™è¨»èˆ‡åƒè€ƒè³‡æ–™</h2>
                    <ul id="memo-list" class="space-y-4 text-gray-700">
                        <!-- Memo items and links rendered by JS -->
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Itinerary data, now with numerical drive/stay times for charting
        const itineraryData = [{
            day: 'ç¬¬ä¸€å¤©',
            date: '10æœˆ11æ—¥ (æ˜ŸæœŸäº”)',
            theme: 'æŠµé”èˆ‡è—æ¹–æº«æ³‰',
            schedule: [{
                time: '08:00',
                activity: 'æŠµé”å‡±å¤«æ‹‰ç¶­å…‹åœ‹éš›æ©Ÿå ´ (KEF)',
                drive: 0,
                stay: 0,
                note: 'æŠµé”å†°å³¶ï¼Œæº–å‚™é–‹å•Ÿæ—…ç¨‹ã€‚'
            }, {
                time: '09:00-10:00',
                activity: 'Blue Car Rental å–è»Š',
                drive: 60,
                stay: 0,
                note: 'æé ˜è¡Œæå¾Œï¼Œå‰å¾€ç§Ÿè»Šå…¬å¸å–è»Šã€‚'
            }, {
                time: '10:30-13:30',
                activity: 'è—æ¹–æº«æ³‰ (Blue Lagoon)',
                drive: 30,
                stay: 180,
                note: 'äº«å—å†°å³¶ç¨ç‰¹çš„æº«æ³‰é«”é©—ï¼Œç·©è§£é•·é€”é£›è¡Œçš„ç–²æ†Šã€‚'
            }, {
                time: '14:00',
                activity: 'æŠµé”é›·å…‹é›…ç¶­å…‹ä½å®¿',
                drive: 40,
                stay: 0,
                note: 'å…¥ä½æ‚¨åœ¨å¸‚ä¸­å¿ƒçš„ Airbnbã€‚'
            }, {
                time: '15:00',
                activity: 'é›·å…‹é›…ç¶­å…‹å¸‚å€è‡ªç”±è¡Œ',
                drive: 0,
                stay: 0,
                note: 'æ™šé¤å¾Œè‡ªç”±é€›é€›ï¼Œç†Ÿæ‚‰ç’°å¢ƒã€‚'
            }]
        }, {
            day: 'ç¬¬äºŒå¤©',
            date: '10æœˆ12æ—¥ (æ˜ŸæœŸå…­)',
            theme: 'é›·å…‹é›…ç¶­å…‹åŸå¸‚æ¢ç´¢',
            schedule: [{
                time: 'ä¸Šåˆ',
                activity: 'é›·å…‹é›…ç¶­å…‹å¸‚å€æ¢ç´¢',
                drive: 0,
                stay: 240,
                note: 'åƒè§€å“ˆçˆ¾æ ¼æ—å§†æ•™å ‚ã€å¤ªé™½èˆªæµ·è€…é›•å¡‘ã€å“ˆå¸•éŸ³æ¨‚å»³ã€‚'
            }, {
                time: 'ä¸‹åˆ',
                activity: 'è³¼ç‰©èˆ‡ç”¨é¤',
                drive: 0,
                stay: 240,
                note: 'åœ¨ Laugavegur è³¼ç‰©è¡—é€›é€›ï¼Œä¸¦äº«ç”¨åˆé¤èˆ‡æ™šé¤ã€‚'
            }]
        }, {
            day: 'ç¬¬ä¸‰å¤©',
            date: '10æœˆ13æ—¥ (æ˜ŸæœŸæ—¥)',
            theme: 'é»ƒé‡‘åœˆèˆ‡å—å²¸è¥¿æ®µ',
            schedule: [{
                time: '08:00',
                activity: 'é›·å…‹é›…ç¶­å…‹å‡ºç™¼',
                drive: 0,
                stay: 0,
                note: 'å‹™å¿…æº–æ™‚å‡ºç™¼ï¼Œçˆ­å–æ—¥ç…§æ™‚é–“ã€‚'
            }, {
                time: '08:45-10:00',
                activity: 'è¾›æ ¼ç¶­åˆ©çˆ¾åœ‹å®¶å…¬åœ’',
                drive: 45,
                stay: 90,
                note: 'æ¬£è³æ¿å¡Šè£‚ç¸«ï¼Œåœ¨æ­¥é“ä¸Šæ¼«æ­¥ã€‚'
            }, {
                time: '10:45-11:45',
                activity: 'è“‹éŒ«çˆ¾é–“æ­‡æ³‰',
                drive: 45,
                stay: 60,
                note: 'ç­‰å¾…é–“æ­‡æ³‰å™´ç™¼çš„å¥‡æ™¯ã€‚'
            }, {
                time: '11:55-13:55',
                activity: 'å¤ä½›æ–¯ç€‘å¸ƒ',
                drive: 10,
                stay: 120,
                note: 'å»ºè­°åœ¨æ­¤ç”¨åˆé¤ï¼Œé¤å»³æä¾›ç†±é£Ÿã€‚'
            }, {
                time: '13:55-15:25',
                activity: 'å‰å¾€å¡é‡Œé›…è˜­ç€‘å¸ƒ',
                drive: 90,
                stay: 0,
                note: 'åœ¨è»Šä¸Šå°æ†©ï¼Œç‚ºä¸‹åˆè¡Œç¨‹é¤Šç²¾è“„éŠ³ã€‚'
            }, {
                time: '15:25-16:25',
                activity: 'å¡é‡Œé›…è˜­ç€‘å¸ƒ',
                drive: 0,
                stay: 60,
                note: 'å¯ç¹è¡Œè‡³ç€‘å¸ƒå¾Œæ–¹ï¼ˆéœ€æ³¨æ„åœ°é¢æ¿•æ»‘ï¼‰ã€‚'
            }, {
                time: '16:35-17:35',
                activity: 'æ–¯ç§‘åŠ çˆ¾ç€‘å¸ƒ',
                drive: 10,
                stay: 60,
                note: 'çˆ¬ä¸Šéšæ¢¯å¾é«˜è™•ä¿¯ç°ç€‘å¸ƒã€‚'
            }, {
                time: '17:45-18:00',
                activity: 'é»‘æ²™ç˜ (Reynisfjara)',
                drive: 10,
                stay: 15,
                note: 'æ¬£è³æ—¥è½å¾Œå†è¾¦ç†å…¥ä½ã€‚'
            }, {
                time: '18:00',
                activity: 'æŠµé”ç¶­å…‹',
                drive: 10,
                stay: 0,
                note: 'å…¥ä½The Barnã€‚'
            }]
        }, {
            day: 'ç¬¬å››å¤©',
            date: '10æœˆ14æ—¥ (æ˜ŸæœŸä¸€)',
            theme: 'å†°å·å¥è¡Œèˆ‡å†°æ²³æ¹–',
            schedule: [{
                time: '08:45',
                activity: 'ç¶­å…‹å‡ºç™¼',
                drive: 0,
                stay: 0,
                note: 'å‹™å¿…ææ—©å‡ºç™¼ï¼Œç‚ºä¸­é€”çš„å³½è°·è¡Œç¨‹é ç•™å……è¶³æ™‚é–“ã€‚'
            }, {
                time: '09:45-11:15',
                activity: 'FjaÃ°rÃ¡rgljÃºfur (ç¾½æ¯›å³½è°·)',
                drive: 60,
                stay: 90,
                note: 'æ­¥è¡Œå³å¯è¼•é¬†æŠµé”è§€æ™¯é»ã€‚'
            }, {
                time: '12:00',
                activity: 'æŠµé”æ–¯å¡å¤«å¡”è²»çˆ¾',
                drive: 45,
                stay: 0,
                note: 'ç›´æ¥å‰å¾€ Glacier Guides å ±åˆ°è™•ã€‚'
            }, {
                time: '12:00-12:40',
                activity: 'å ±åˆ°ã€é ˜å–è£å‚™ã€ç°¡å ±',
                drive: 0,
                stay: 40,
                note: 'å¿…é ˆåœ¨ 12:40 å‰æŠµé”ï¼'
            }, {
                time: '13:00-17:00',
                activity: 'ã€ŒGlacier Wondersã€å†°å·å¥è¡Œ',
                drive: 0,
                stay: 240,
                note: 'ç›¡æƒ…äº«å—å†°å·ä¸Šçš„å¥‡æ™¯ã€‚'
            }, {
                time: '17:45',
                activity: 'æŠµé”å‚‘å¤æ²™é¾å†°æ²³æ¹–',
                drive: 45,
                stay: 45,
                note: 'æ¬£è³å†°æ²³æ¹–çš„å£¯è§€æ™¯è‰²ã€‚'
            }, {
                time: '17:50',
                activity: 'æ­¥è¡Œå‰å¾€é‘½çŸ³æ²™ç˜',
                drive: 5,
                stay: 30,
                note: 'åœ¨é»‘æ²™ç˜ä¸Šå°‹æ‰¾é–ƒé–ƒç™¼å…‰çš„æµ®å†°ã€‚'
            }, {
                time: '18:30',
                activity: 'æŠµé”Hali é„‰æ‘æ—…é¤¨',
                drive: 15,
                stay: 0,
                note: 'å¯å°±è¿‘æ¬£è³å†°æ²³æ¹–å¤œæ™¯èˆ‡æ¥µå…‰ã€‚'
            }]
        }, {
            day: 'ç¬¬äº”å¤©',
            date: '10æœˆ15æ—¥ (æ˜ŸæœŸäºŒ)',
            theme: 'å†°æ²³èˆ¹èˆ‡æ±å—å²¸',
            schedule: [{
                time: '09:00-16:00',
                activity: 'ã€ŒGlacier Magicã€å†°å·å¥è¡Œèˆ‡å†°æ²³èˆ¹',
                drive: 15,
                stay: 420,
                note: 'å¯æ–¼æ´»å‹•æœŸé–“æˆ–çµæŸå¾Œï¼Œåœ¨é™„è¿‘äº«ç”¨è¼•é£Ÿæˆ–åˆé¤ã€‚'
            }, {
                time: '16:00',
                activity: 'æŠµé”éœå¤« (HÃ¶fn)',
                drive: 30,
                stay: 0,
                note: 'å…¥ä½The Greyhouseï¼Œä¸¦åœ¨å°é®è‡ªç”±æ´»å‹•ã€‚'
            }]
        }, {
            day: 'ç¬¬å…­å¤©',
            date: '10æœˆ16æ—¥ (æ˜ŸæœŸä¸‰)',
            theme: 'é•·é€”é§•é§›ï¼šå¾éœå¤«å‰å¾€èƒ¡è–©ç¶­å…‹',
            schedule: [{
                time: '08:00',
                activity: 'éœå¤«å‡ºç™¼',
                drive: 0,
                stay: 0,
                note: 'æœ¬æ—¥è»Šç¨‹ç´„ 5 å°æ™‚ï¼Œå‹™å¿…ææ—©å‡ºç™¼ï¼Œä¸¦æº–å‚™å¥½é›¶é£Ÿèˆ‡é£²æ°´ã€‚'
            }, {
                time: '09:30-10:30',
                activity: 'Vestrahorn (è§’å±±)',
                drive: 90,
                stay: 60,
                note: 'æ¢ç´¢é€™å€‹å……æ»¿æˆ²åŠ‡æ€§æ™¯è§€çš„å†°å³¶åœ°æ¨™ï¼Œéå¸¸é©åˆæ”å½±ã€‚'
            }, {
                time: '10:30-15:30',
                activity: 'å‰å¾€é»›æç€‘å¸ƒ (Dettifoss)',
                drive: 300,
                stay: 0,
                note: 'åœ¨è»Šä¸Šä¼‘æ¯ï¼Œæ¬£è³æ±éƒ¨å³½ç£çš„é¢¨æ™¯ã€‚'
            }, {
                time: '15:30-17:00',
                activity: 'é»›æç€‘å¸ƒ (Dettifoss)',
                drive: 0,
                stay: 90,
                note: 'æ­æ´²æ°´é‡æœ€å¤§çš„ç€‘å¸ƒï¼Œé«”é©—å…¶éœ‡æ’¼çš„æ°£å‹¢ã€‚'
            }, {
                time: '17:30',
                activity: 'æŠµé”èƒ¡è–©ç¶­å…‹',
                drive: 30,
                stay: 0,
                note: 'å…¥ä½æ‚¨åœ¨èƒ¡è–©ç¶­å…‹çš„ Airbnbï¼Œä¸¦åœ¨å°é®è‡ªç”±æ´»å‹•ã€‚'
            }]
        }, {
            day: 'ç¬¬ä¸ƒå¤©',
            date: '10æœˆ17æ—¥ (æ˜ŸæœŸå››)',
            theme: 'åŒ—éƒ¨æ¢ç´¢ï¼šç±³æ¹–èˆ‡çœ¾ç¥ç€‘å¸ƒ',
            schedule: [{
                time: '09:00',
                activity: 'èƒ¡è–©ç¶­å…‹ä½å®¿å‡ºç™¼',
                drive: 0,
                stay: 0,
                note: 'æœ¬æ—¥è¡Œç¨‹ä»¥æ·±åº¦æ¢ç´¢ç±³æ¹–å‘¨é‚Šç‚ºä¸»ï¼Œå¯æ‚ é–’åœ°å•Ÿç¨‹ã€‚'
            }, {
                time: '09:30-10:30',
                activity: 'VÃ­ti ç«å±±æ¹–',
                drive: 30,
                stay: 60,
                note: 'å‰å¾€ç«å±±å£é‚Šç·£ï¼Œæ¬£è³å…¶ç¨ç‰¹çš„ç¶ æ¾çŸ³è‰²æ¹–æ°´ã€‚'
            }, {
                time: '10:45-12:00',
                activity: 'ç±³æ¹–åœ°ç†±å€ (Hverir) & é»‘è‰²åŸå ¡ (Dimmuborgir)',
                drive: 15,
                stay: 90,
                note: 'æ¢ç´¢å†’è‘—è’¸æ°£çš„åœ°ç†±å€å’Œå¥‡å½¢æ€ªç‹€çš„ç†”å²©åœ°è²Œã€‚'
            }, {
                time: '12:00-13:00',
                activity: 'åœ¨é›·æ°åˆ©èŒ² (ReykjahlÃ­Ã°) ç”¨åˆé¤',
                drive: 0,
                stay: 60,
                note: 'åœ¨ç±³æ¹–æ¹–é‚Šçš„å°é®äº«ç”¨åˆé¤ã€‚'
            }, {
                time: '13:15-14:45',
                activity: 'ç±³æ¹–æº«æ³‰ (MÃ½vatn Nature Baths)',
                drive: 15,
                stay: 90,
                note: 'é¸æ“‡æ€§è¡Œç¨‹ã€‚ è‹¥æ™‚é–“å……è£•ï¼Œå¯åœ¨æ­¤æ”¾é¬†æ³¡æ¹¯ã€‚'
            }, {
                time: '15:15-16:15',
                activity: 'çœ¾ç¥ç€‘å¸ƒ (GoÃ°afoss)',
                drive: 30,
                stay: 60,
                note: 'å†°å³¶æœ€ç¾çš„ç€‘å¸ƒä¹‹ä¸€ï¼Œå½¢ç‹€å„ªç¾ï¼Œå¯å¾ä¸åŒè§’åº¦è§€è³ã€‚'
            }, {
                time: '16:45',
                activity: 'æŠµé”é˜¿å…‹é›·é‡Œ',
                drive: 30,
                stay: 0,
                note: 'å…¥ä½ E18 Apartmentsã€‚'
            }]
        }, {
            day: 'ç¬¬å…«å¤©',
            date: '10æœˆ18æ—¥ (æ˜ŸæœŸäº”)',
            theme: 'è¥¿éƒ¨å†’éšªï¼šå‰å¾€æ–¯å¥ˆå±±åŠå³¶',
            schedule: [{
                time: '09:00',
                activity: 'é˜¿å…‹é›·é‡Œå‡ºç™¼',
                drive: 0,
                stay: 0,
                note: 'æœ¬æ—¥è»Šç¨‹è¼ƒé•·ï¼Œæ²¿é€”é¢¨å…‰ç„¡é™ã€‚'
            }, {
                time: '10:30-11:30',
                activity: 'HvÃ­tserkur (çŠ€ç‰›å²©)',
                drive: 90,
                stay: 60,
                note: 'è§€è³é€™å¡Šå½¢ç‹€ç¨ç‰¹çš„å²©çŸ³ï¼Œæœ‰æ™‚èƒ½çœ‹åˆ°æµ·è±¹ã€‚'
            }, {
                time: '12:30-13:30',
                activity: 'åœ¨å¸ƒæ‰é”å‘‚çˆ¾ç”¨åˆé¤',
                drive: 60,
                stay: 60,
                note: 'æŠµé”ä½å®¿åœ°é»ï¼Œå…ˆæ”¾é¬†ä¸¦äº«ç”¨åˆé¤ã€‚'
            }, {
                time: '14:00',
                activity: 'æŠµé”å¸ƒæ‰é”å‘‚çˆ¾ä½å®¿',
                drive: 60,
                stay: 0,
                note: 'å…¥ä½ åŸå ¡æ°‘å®¿ (Castle Guesthouse)ã€‚'
            }, {
                time: '15:00-17:00',
                activity: 'æ–¯å¥ˆå±±åŠå³¶æ±éƒ¨æ¢ç´¢',
                drive: 120,
                stay: 0,
                note: 'å¯åœ¨å‘¨é‚Šæ¢ç´¢ï¼Œä¾‹å¦‚å‰å¾€æ•™æœƒå±± (Kirkjufell)ã€‚'
            }, {
                time: '18:00',
                activity: 'åœ¨ä½å®¿åœ°é»ç”¨æ™šé¤',
                drive: 0,
                stay: 0,
                note: 'æ¬£è³å‘¨é‚Šæ™¯è‰²ï¼Œäº«å—å¯§éœçš„å¤œæ™šã€‚'
            }]
        }, {
            day: 'ç¬¬ä¹å¤©',
            date: '10æœˆ19æ—¥ (æ˜ŸæœŸå…­)',
            theme: 'æ–¯å¥ˆå±±åŠå³¶ç’°ç‹€æ¢ç´¢',
            schedule: [{
                time: '09:00',
                activity: 'å¸ƒæ‰é”å‘‚çˆ¾å‡ºç™¼',
                drive: 0,
                stay: 0,
                note: 'ä»Šå¤©å°‡å®Œæ•´ç’°ç¹æ–¯å¥ˆå±±åŠå³¶ã€‚'
            }, {
                time: '10:00-11:30',
                activity: 'æ•™å ‚å±± (Kirkjufell)',
                drive: 60,
                stay: 90,
                note: 'å†°å³¶æœ€ä¸Šé¡çš„å±±å³°ï¼Œå¯å¾ä¸åŒè§’åº¦æ‹æ”ã€‚'
            }, {
                time: '12:00-13:00',
                activity: 'é˜¿çˆ¾ç´æ–¯å¡”çš® (Arnarstapi)',
                drive: 30,
                stay: 60,
                note: 'æ¢ç´¢ç„æ­¦å²©å³­å£èˆ‡æ‹±é–€ï¼Œä¸¦åœ¨æ¼æ‘ç”¨åˆé¤ã€‚'
            }, {
                time: '14:00-15:00',
                activity: 'æ–¯å¥ˆå±±å†°å·åœ‹å®¶å…¬åœ’ (SnÃ¦fellsjÃ¶kull National Park)',
                drive: 60,
                stay: 60,
                note: 'æ„Ÿå—é€™åº§å£¯è§€å†°å·çš„å®å‰æ°£å‹¢ã€‚'
            }, {
                time: '15:30-16:30',
                activity: 'DjÃºpalÃ³nssandur (é»‘æ²™ç˜)',
                drive: 30,
                stay: 60,
                note: 'æ¢ç´¢ç¨ç‰¹çš„é»‘æ²™ç˜ï¼Œä¸¦å˜—è©¦æŒ‘æˆ°åŠ›å£«ä¹‹çŸ³ã€‚'
            }, {
                time: '17:00',
                activity: 'æŠµé”é˜¿çˆ¾ç´æ–¯å¡”çš®ä½å®¿',
                drive: 30,
                stay: 0,
                note: 'å…¥ä½ Grundã€‚'
            }]
        }, {
            day: 'ç¬¬åå¤©',
            date: '10æœˆ20æ—¥ (æ˜ŸæœŸæ—¥)',
            theme: 'è¿”å›é›·å…‹é›…ç¶­å…‹',
            schedule: [{
                time: '09:00',
                activity: 'é˜¿çˆ¾ç´æ–¯å¡”çš®å‡ºç™¼',
                drive: 0,
                stay: 0,
                note: 'é–‹å§‹è¿”å›é›·å…‹é›…ç¶­å…‹çš„è·¯ç¨‹ã€‚'
            }, {
                time: '10:30-12:00',
                activity: 'åšçˆ¾åŠ å…§æ–¯ (Borgarnes)',
                drive: 90,
                stay: 90,
                note: 'åœ¨å°é®ä¼‘æ¯ã€ç”¨åˆé¤ï¼Œä¸¦æ¬£è³æµ·å²¸ç·šé¢¨å…‰ã€‚'
            }, {
                time: '13:30',
                activity: 'æŠµé”é›·å…‹é›…ç¶­å…‹',
                drive: 90,
                stay: 0,
                note: 'å…¥ä½ å¥§ä¸æ–¯ç¶­é…’åº— (Hotel Odinsve)ã€‚'
            }, {
                time: '14:30',
                activity: 'é›·å…‹é›…ç¶­å…‹å¸‚å€è‡ªç”±æ´»å‹•',
                drive: 0,
                stay: 0,
                note: 'äº«å—åœ¨å¸‚å€çš„æœ€å¾Œæ™‚å…‰ï¼Œè³¼è²·ç´€å¿µå“æˆ–äº«å—ç¾é£Ÿã€‚'
            }]
        }, {
            day: 'ç¬¬åä¸€å¤©',
            date: '10æœˆ21æ—¥ (æ˜ŸæœŸä¸€)',
            theme: 'æ‚ é–’èˆ‡è¿”ç¨‹',
            schedule: [{
                time: 'ä¸Šåˆ',
                activity: 'åœ¨é›·å…‹é›…ç¶­å…‹è‡ªç”±æ´»å‹•',
                drive: 0,
                stay: 0,
                note: 'ç¡åˆ°è‡ªç„¶é†’ï¼Œåœ¨å¸‚å€äº«ç”¨æ‚ é–’æ—©é¤ã€‚'
            }, {
                time: '12:00',
                activity: 'Sky Lagoon',
                drive: 15,
                stay: 120,
                note: 'åœ¨å›åœ‹å‰ï¼Œå†æ¬¡é«”é©—å†°å³¶ç¨ç‰¹çš„æº«æ³‰ï¼Œå¾å¦ä¸€ç¨®è§’åº¦æ¬£è³å¸‚å€é¢¨æ™¯ã€‚'
            }, {
                time: '15:00',
                activity: 'å‰å¾€å‡±å¤«æ‹‰ç¶­å…‹åœ‹éš›æ©Ÿå ´ (KEF)',
                drive: 40,
                stay: 0,
                note: 'ææ—©å‰å¾€æ©Ÿå ´ï¼Œæº–å‚™é‚„è»Šã€‚'
            }, {
                time: '15:45',
                activity: 'Blue Car Rental é‚„è»Š',
                drive: 0,
                stay: 0,
                note: 'é‚„è»Šä¸¦è¾¦ç†ç™»æ©Ÿæ‰‹çºŒã€‚'
            }]
        }, {
            day: 'ç¬¬åäºŒå¤©',
            date: '10æœˆ22æ—¥ (æ˜ŸæœŸäºŒ)',
            theme: 'æŠµé”å°åŒ—',
            schedule: [{
                time: 'å…¨å¤©',
                activity: 'è½‰æ©Ÿèˆ‡è¿”ç¨‹',
                drive: 0,
                stay: 0,
                note: 'æŠµé”æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ï¼ŒçµæŸç¾å¥½æ—…ç¨‹ã€‚'
            }]
        }];

        // Accommodation data
        const accommodationData = [{
            day: 'ç¬¬ä¸€å¤©',
            place: 'é›·å…‹é›…ç¶­å…‹å¸‚å€',
            name: 'Airbnb'
        }, {
            day: 'ç¬¬ä¸‰å¤©',
            place: 'ç¶­å…‹',
            name: 'The Barn'
        }, {
            day: 'ç¬¬å››å¤©',
            place: 'å‚‘å¤æ²™é¾å†°æ²³æ¹–é™„è¿‘',
            name: 'Hali Country Hotel'
        }, {
            day: 'ç¬¬äº”å¤©',
            place: 'éœå¤«',
            name: 'The Greyhouse'
        }, {
            day: 'ç¬¬å…­å¤©',
            place: 'èƒ¡è–©ç¶­å…‹',
            name: 'Airbnb'
        }, {
            day: 'ç¬¬ä¸ƒå¤©',
            place: 'é˜¿å…‹é›·é‡Œ',
            name: 'E18 Apartments'
        }, {
            day: 'ç¬¬å…«å¤©',
            place: 'å¸ƒæ‰é”å‘‚çˆ¾',
            name: 'åŸå ¡æ°‘å®¿ (Castle Guesthouse)'
        }, {
            day: 'ç¬¬ä¹å¤©',
            place: 'é˜¿çˆ¾ç´æ–¯å¡”çš®',
            name: 'Grund'
        }, {
            day: 'ç¬¬åå¤©',
            place: 'é›·å…‹é›…ç¶­å…‹',
            name: 'å¥§ä¸æ–¯ç¶­é…’åº— (Hotel Odinsve)'
        }, {
            day: 'ç¬¬åä¸€å¤©',
            place: 'è¿”ç¨‹',
            name: 'ç„¡ä½å®¿'
        }];

        // To-do list and memo data
        const todoData = [{
            status: 'pending',
            text: 'é å®šè—æ¹–æº«æ³‰é–€ç¥¨'
        }, {
            status: 'pending',
            text: 'é å®šå†°å·å¥è¡Œè¡Œç¨‹'
        }, {
            status: 'pending',
            text: 'é å®šç§Ÿè»Š'
        }, {
            status: 'pending',
            text: 'æŸ¥è©¢ç•¶åœ°ç”¨é¤åœ°é»'
        }];

        const memoData = [
            'å†°å³¶åŠ æ²¹ç«™æ˜¯è‡ªåŠ©å¼ï¼Œéœ€ä½¿ç”¨ä¿¡ç”¨å¡ã€‚',
            'å¤šæ•¸æ™¯é»åœè»Šéœ€ä»˜è²»ï¼Œå¯ä½¿ç”¨ app ç¹³è²»ã€‚',
            'å†¬å­£æ—¥ç…§çŸ­ï¼Œè¡Œç¨‹æ™‚é–“è¦åŠƒéœ€æ›´å½ˆæ€§ã€‚',
            'å†°å³¶å¤©æ°£å¤šè®Šï¼Œå»ºè­°æ¡æ´‹è”¥å¼ç©¿æ­ã€‚',
            'æ¥µå…‰è§€æ¸¬éœ€å¤©æ™‚åœ°åˆ©äººå’Œï¼Œå‹¿æŠ±éé«˜æœŸå¾…ã€‚',
            '<a href="https://shiningchan.com/blog/post/iceland-travel-introduction/" class="text-blue-500 hover:underline">ç’°å³¶è¡Œç¨‹åƒè€ƒ</a>',
            '<a href="https://bobbyfun.tw/2024-01-16-2754/" class="text-blue-500 hover:underline">ç’°å³¶è¡Œç¨‹åƒè€ƒ</a>',
            '<a href="https://toyadailylife.com/bring-to-iceland/" class="text-blue-500 hover:underline">å¿…å‚™ç‰©å“æ¸…å–®</a>'
        ];

        // Global Chart variable
        let timeChart = null;

        // Get DOM elements
        const tabsContainer = document.querySelector('nav');
        const tabContents = document.querySelectorAll('.tab-content');
        const dayNavList = document.getElementById('day-nav-list');
        const currentDayTitle = document.getElementById('current-day-title');
        const currentDayTheme = document.getElementById('current-day-theme');
        const itineraryCardsContainer = document.getElementById('itinerary-cards-container');
        const accommodationTab = document.getElementById('accommodation-tab');
        const todoListContainer = document.getElementById('todo-list');
        const memoListContainer = document.getElementById('memo-list');
        const chartCanvas = document.getElementById('timeChart');

        // Function to handle tab switching
        function setupTabs() {
            tabsContainer.addEventListener('click', (event) => {
                const target = event.target.closest('.tab-btn');
                if (target) {
                    const tabName = target.dataset.tab;

                    // Deactivate all tabs and content
                    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

                    // Activate selected tab and content
                    target.classList.add('active');
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                    
                    // Specific rendering for each tab
                    if (tabName === 'itinerary') {
                        renderDay(0);
                    } else if (tabName === 'accommodation') {
                        renderAccommodation();
                    } else if (tabName === 'memo') {
                        renderTodoAndMemo();
                    }
                }
            });
        }

        // Function to render the navigation menu
        function renderNav() {
            dayNavList.innerHTML = itineraryData.map((day, index) => `
                <li>
                    <button class="sidebar-nav-btn flex-shrink-0 py-2 px-3 rounded-xl transition-colors duration-200 font-semibold text-gray-700 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 active:bg-blue-200 text-sm lg:w-full lg:text-left" data-day-index="${index}">
                        ${day.day}
                    </button>
                </li>
            `).join('');

            document.querySelectorAll('.sidebar-nav-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const dayIndex = event.target.dataset.dayIndex;
                    renderDay(dayIndex);
                });
            });
        }

        // Function to render the selected day's itinerary and chart
        function renderDay(dayIndex) {
            // Remove active state from all buttons
            document.querySelectorAll('.sidebar-nav-btn').forEach(btn => btn.classList.remove('active'));

            // Add active state to the current button
            const currentButton = dayNavList.querySelector(`[data-day-index="${dayIndex}"]`);
            if (currentButton) {
                currentButton.classList.add('active');
            }

            const currentDay = itineraryData[dayIndex];
            // Update header
            currentDayTitle.textContent = `${currentDay.day} - ${currentDay.date}`;
            currentDayTheme.textContent = `ä¸»é¡Œï¼š${currentDay.theme}`;

            // Clear previous cards content
            itineraryCardsContainer.innerHTML = '';

            let totalDriveTime = 0;
            let totalStayTime = 0;

            // Render new itinerary content as cards
            currentDay.schedule.forEach(item => {
                const card = document.createElement('div');
                card.classList.add('bg-gray-50', 'p-4', 'rounded-xl', 'border', 'border-gray-200');
                card.innerHTML = `
                    <p class="text-sm text-gray-500 mb-1">æ™‚é–“</p>
                    <h4 class="text-lg font-bold text-blue-800 mb-2">${item.time}</h4>
                    <p class="text-sm text-gray-500">è¡Œç¨‹</p>
                    <p class="font-medium text-gray-900 mb-2">${item.activity}</p>
                    <div class="flex items-center space-x-4 text-sm text-gray-600 mb-2">
                        <p class="flex items-center">
                            <span class="mr-1 text-base">ğŸš—</span>
                            <span>${item.drive ? item.drive + ' åˆ†é˜' : 'ç„¡'}</span>
                        </p>
                        <p class="flex items-center">
                            <span class="mr-1 text-base">â±ï¸</span>
                            <span>${item.stay ? item.stay + ' åˆ†é˜' : 'ç„¡'}</span>
                        </p>
                    </div>
                    <p class="text-sm text-gray-500">å‚™è¨»</p>
                    <p class="text-gray-600">${item.note}</p>
                `;
                itineraryCardsContainer.appendChild(card);

                totalDriveTime += item.drive;
                totalStayTime += item.stay;
            });
            
            // Render Chart
            renderTimeChart(totalDriveTime, totalStayTime);
        }
        
        // Function to render the time allocation chart
        function renderTimeChart(drive, stay) {
            // Destroy existing chart instance to prevent errors
            if (timeChart) {
                timeChart.destroy();
            }

            const ctx = chartCanvas.getContext('2d');
            timeChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['é–‹è»Šæ™‚é–“', 'æ´»å‹•æ™‚é–“'],
                    datasets: [{
                        label: 'æ™‚é–“åˆ†é…',
                        data: [drive, stay],
                        backgroundColor: [
                            'rgb(59, 130, 246)', // Tailwind blue-500
                            'rgb(249, 115, 22)' // Tailwind orange-500
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    size: 14,
                                    family: 'Noto Sans TC'
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + ' åˆ†é˜';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Function to render the accommodation section
        function renderAccommodation() {
            accommodationTab.innerHTML = accommodationData.map(item => `
                <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                    <h3 class="text-xl font-bold text-blue-800 mb-2">${item.day} - ${item.place}</h3>
                    <p class="text-gray-600">ä½å®¿ï¼š<span class="font-semibold text-gray-900">${item.name}</span></p>
                </div>
            `).join('');
        }

        // Function to render the to-do list and memo
        function renderTodoAndMemo() {
            todoListContainer.innerHTML = todoData.map(item => `
                <li class="flex items-center">
                    <span class="mr-3 text-lg">${item.status === 'done' ? 'âœ…' : 'â³'}</span>
                    <span class="${item.status === 'done' ? 'line-through text-slate-400' : ''}">${item.text}</span>
                </li>
            `).join('');

            memoListContainer.innerHTML = memoData.map(item => `
                <li class="flex items-start">
                    <span class="mr-3 text-sky-500 mt-1">â™¦ï¸</span>
                    <span>${item}</span>
                </li>
            `).join('');
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            setupTabs();
            renderNav();
            // Render the first day by default
            renderDay(0);
        });
    </script>
</body>

</html>
