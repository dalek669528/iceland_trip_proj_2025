<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>冰島完整12日自駕行程儀表板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Warm Neutrals with Soft Blue Accents) -->
    <!-- Application Structure Plan: A tab-based SPA with three main views: Itinerary, Accommodation, and To-Do List. The Itinerary view is the default, featuring a sub-navigation for each day. Selecting a day dynamically updates a timeline of events and a Chart.js donut chart visualizing the day's time allocation (driving vs. activities). This structure was chosen to break down the dense 12-day plan into digestible, interactive segments, allowing users to focus on one day at a time while still having easy access to other key trip information like lodging and checklists. -->
    <!-- Visualization & Content Choices: Report Info: Daily schedule with drive/stop times -> Goal: Show daily pace at a glance -> Viz/Presentation: Chart.js Donut Chart -> Interaction: Updates dynamically on day selection -> Justification: Provides a quick, quantitative summary of how busy each day is, which is more intuitive than reading a list of times. Report Info: Accommodation list -> Goal: Organize lodging info -> Viz/Presentation: Styled HTML table -> Interaction: Static view -> Justification: A table is the clearest way to present structured lodging data. All other diagrams and lists are built with HTML/CSS and Unicode icons for simplicity and performance. Confirmed NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto+Sans+TC', sans-serif;
            background-color: #f8fafc;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .view {
            display: none;
        }
        .view.active {
            display: block;
        }
        .nav-btn {
            transition: all 0.3s ease;
        }
        .nav-btn.active {
            background-color: #0ea5e9;
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .day-btn {
            transition: all 0.3s ease;
        }
        .day-btn.active {
            background-color: #38bdf8;
            color: white;
            transform: translateY(-2px);
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 1.25rem;
            top: 1.25rem;
            bottom: -1.25rem;
            width: 2px;
            background-color: #e2e8f0;
            transform: translateX(-50%);
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-icon {
            z-index: 10;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-sky-800">冰島環島之旅</h1>
            <p class="text-slate-500 mt-2 text-lg">📅 2025年10月10日 - 10月22日</p>
        </header>

        <nav class="flex justify-center gap-2 md:gap-4 mb-8 flex-wrap">
            <button class="nav-btn active px-6 py-3 bg-white rounded-full shadow-sm font-semibold text-slate-700" data-view="itinerary">行程總覽</button>
            <button class="nav-btn px-6 py-3 bg-white rounded-full shadow-sm font-semibold text-slate-700" data-view="accommodation">住宿資訊</button>
            <button class="nav-btn px-6 py-3 bg-white rounded-full shadow-sm font-semibold text-slate-700" data-view="todo">待辦清單</button>
        </nav>

        <main>
            <div id="itinerary-view" class="view active">
                <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <p class="text-center text-slate-600 mb-6">這份行程涵蓋了冰島的南部、北部及西部，從經典的黃金圈到壯麗的冰川，再到迷人的斯奈山半島。點擊下方日期按鈕，即可查看每日的詳細規劃與時間分配圖表。</p>
                    <div id="day-selector" class="flex flex-wrap justify-center gap-2 mb-8"></div>
                    <div id="day-details" class="transition-opacity duration-500 ease-in-out"></div>
                </div>
            </div>

            <div id="accommodation-view" class="view">
                 <div class="bg-white p-4 sm:p-6 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold text-center mb-6 text-sky-700">住宿資訊一覽</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-slate-600">
                            <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                                <tr>
                                    <th scope="col" class="px-4 py-3">日期</th>
                                    <th scope="col" class="px-4 py-3">地區</th>
                                    <th scope="col" class="px-4 py-3">住宿名稱</th>
                                    <th scope="col" class="px-4 py-3">房型</th>
                                    <th scope="col" class="px-4 py-3">價格 (每人/天)</th>
                                </tr>
                            </thead>
                            <tbody id="accommodation-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="todo-view" class="view">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-bold mb-4 text-sky-700">☑️ 行前待辦清單</h2>
                        <ul id="todo-list" class="space-y-3 text-slate-700"></ul>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-bold mb-4 text-sky-700">♦️ 重要備忘錄</h2>
                        <ul id="memo-list" class="space-y-3 text-slate-700"></ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

<script>
const itineraryData = [
    {
        day: 1, date: '10/11 (五)', theme: '抵達與藍湖溫泉',
        events: [
            { time: '08:00', icon: '🛬', title: '抵達凱夫拉維克國際機場 (KEF)', drive: 0, stop: 60, notes: '抵達冰島，準備開啟旅程。', link: 'https://www.google.com/maps/place/%E5%87%B1%E5%A4%AB%E6%8B%89%E7%B6%AD%E5%85%8B%E5%9C%8B%E9%9A%9B%E6%A9%9F%E5%A0%B4/@63.985958,-22.618693,17z/data=!3m1!4b1!4m6!3m5!1s0x48d60233b6647963:0xfe0139b4b0e5170d!8m2!3d63.985958!4d-22.616118!16zL20vMGNoNzJx?entry=ttu' },
            { time: '09:00-10:00', icon: '🚗', title: 'Blue Car Rental 取車', drive: 0, stop: 60, notes: '提領行李後，前往租車公司取車。', link: 'https://www.google.com/maps/place/Blue+Car+Rental/@63.9934161,-22.6247385,17z/data=!3m1!4b1!4m6!3m5!1s0x48d6021273946761:0x39775f4640d2d312!8m2!3d63.9934161!4d-22.6221636!16s%2Fg%2F11b65v70h9?entry=ttu' },
            { time: '10:30-13:30', icon: '♨️', title: '藍湖溫泉 (Blue Lagoon)', drive: 30, stop: 180, notes: '享受溫泉體驗，緩解長途飛行的疲憊。', link: 'https://www.google.com/maps/place/Blue+Lagoon/@63.8812604,-22.4578051,17z/data=!3m1!4b1!4m6!3m5!1s0x48d601d36d4004c1:0xf664b44983053744!8m2!3d63.8812604!4d-22.4552302!16s%2Fg%2F125p775w?entry=ttu' },
            { time: '14:00', icon: '🏨', title: '抵達雷克雅維克住宿', drive: 40, stop: 60, notes: '入住市中心的 Airbnb (Bergþórugata 35)。', link: 'https://www.google.com/maps/place/Berg%C3%BE%C3%B3rugata+35,+101+Reykjav%C3%ADk,+Iceland/@64.141528,-21.921312,17z/data=!3m1!4b1!4m6!3m5!1s0x48d674b88f910411:0x5e022f4728556535!8m2!3d64.141528!4d-21.9187371!16s%2Fg%2F11bxbt2s9l?entry=ttu' },
            { time: '15:00', icon: '🚶', title: '雷克雅維克市區自由行', drive: 0, stop: 240, notes: '晚餐後自由逛逛，熟悉環境。', link: 'https://www.google.com/maps/place/%E9%9B%B7%E5%85%8B%E9%9B%85%E7%B6%AD%E5%85%8B%E5%B8%82%E4%B8%AD%E5%BF%83/@64.1458992,-21.9332039,15z/data=!3m1!4b1!4m6!3m5!1s0x48d674d8178a945d:0x221c57e50207b5a8!8m2!3d64.1466037!4d-21.9427047!16s%2Fg%2F11b61655h9?entry=ttu' }
        ]
    },
    {
        day: 2, date: '10/12 (六)', theme: '雷克雅維克城市探索',
        events: [
            { time: '上午', icon: '⛪', title: '雷克雅維克市區探索', drive: 0, stop: 240, notes: '徒步參觀哈爾格林姆教堂、太陽航海者雕塑、哈帕音樂廳。', link: 'https://www.google.com/maps/place/%E9%9B%B7%E5%85%8B%E9%9B%85%E7%B6%AD%E5%85%8B%E5%B8%82%E4%B8%AD%E5%BF%83/@64.1458992,-21.9332039,15z/data=!3m1!4b1!4m6!3m5!1s0x48d674d8178a945d:0x221c57e50207b5a8!8m2!3d64.1466037!4d-21.9427047!16s%2Fg%2F11b61655h9?entry=ttu' },
            { time: '下午', icon: '🛍️', title: '購物與用餐', drive: 0, stop: 240, notes: '在 Laugavegur 購物街逛逛，並在市區享用午餐與晚餐。', link: 'https://www.google.com/maps/place/Laugavegur/@64.1432462,-21.9288126,17z/data=!3m1!4b1!4m6!3m5!1s0x48d674d5c1926615:0x52ed6f2351c2ac3a!8m2!3d64.1432462!4d-21.9262377!16s%2Fg%2F1tg73w7c?entry=ttu' },
            { time: '晚上', icon: '🏨', title: '返回住宿', drive: 0, stop: 0, notes: '繼續入住 Bergþórugata 35。', link: 'https://www.google.com/maps/place/Berg%C3%BE%C3%B3rugata+35,+101+Reykjav%C3%ADk,+Iceland/@64.141528,-21.921312,17z/data=!3m1!4b1!4m6!3m5!1s0x48d674b88f910411:0x5e022f4728556535!8m2!3d64.141528!4d-21.9187371!16s%2Fg%2F11bxbt2s9l?entry=ttu' }
        ]
    },
    {
        day: 3, date: '10/13 (日)', theme: '黃金圈與南岸西段',
        events: [
            { time: '08:00', icon: '🚀', title: '雷克雅維克出發', drive: 0, stop: 0, notes: '務必準時出發，爭取日照時間。' },
            { time: '08:45-10:00', icon: '🏞️', title: '辛格維利爾国家公园', drive: 45, stop: 75, notes: '欣賞板塊裂縫，在步道上漫步。', link: 'https://www.google.com/maps/place/Thingvellir+National+Park/@64.255956,-21.127813,17z/data=!3m1!4b1!4m6!3m5!1s0x48d641ef6a7f0581:0x5e63486c75c88b77!8m2!3d64.255956!4d-21.1252381!16s%2Fg%2F11bc4cgy2y?entry=ttu' },
            { time: '10:45-11:45', icon: '🌋', title: '蓋錫爾間歇泉', drive: 60, stop: 60, notes: '等待間歇泉噴發的奇景。', link: 'https://www.google.com/maps/place/Geysir+Hot+Spring+Area/@64.3129334,-20.306024,17z/data=!3m1!4b1!4m6!3m5!1s0x48d6a8f15d788939:0x2077e38a221f7360!8m2!3d64.3129334!4d-20.3034491!16s%2Fg%2F12275tgb?entry=ttu' },
            { time: '11:55-13:55', icon: '💧', title: '古佛斯瀑布', drive: 10, stop: 120, notes: '建議在此用午餐，餐廳提供熱食。', link: 'https://www.google.com/maps/place/Gullfoss/@64.3263077,-20.126071,17z/data=!3m1!4b1!4m6!3m5!1s0x48d6a911a3d92cfb:0x5b3670603f0d4b85!8m2!3d64.3263077!4d-20.1234961!16s%2Fg%2F11b61c162w?entry=ttu' },
            { time: '15:25-16:25', icon: '💧', title: '塞里雅蘭瀑布', drive: 90, stop: 60, notes: '可繞行至瀑布後方（需注意地面濕滑）。', link: 'https://www.google.com/maps/place/Seljalandsfoss/@63.615694,-19.9934271,17z/data=!3m1!4b1!4m6!3m5!1s0x48d635031b2383c9:0x937c9502b48e6c40!8m2!3d63.615694!4d-19.9908522!16s%2Fg%2F11bc5c8668?entry=ttu' },
            { time: '16:35-17:35', icon: '💧', title: '斯科加爾瀑布', drive: 10, stop: 60, notes: '爬上階梯從高處俯瞰瀑布。', link: 'https://www.google.com/maps/place/Sk%C3%B3gafoss/@63.5298836,-19.5135254,17z/data=!3m1!4b1!4m6!3m5!1s0x48d637c385b03513:0x15b13865675e0766!8m2!3d63.5298836!4d-19.5109505!16s%2Fg%2F11b61d3319?entry=ttu' },
            { time: '17:45-18:00', icon: '🌊', title: '黑沙灘 (Reynisfjara)', drive: 10, stop: 15, notes: '抵達維克後先前往黑沙灘，欣賞完後再辦理入住。', link: 'https://www.google.com/maps/place/%E9%9B%B7%E5%B0%BC%E6%96%AF%E9%BB%91%E6%B2%99%E7%81%98/@63.4024564,-19.0494548,17z/data=!3m1!4b1!4m6!3m5!1s0x48d6313495c6f609:0x2289c03823ce97f5!8m2!3d63.4024564!4d-19.0468799!16s%2Fg%2F12502j95b?entry=ttu' },
            { time: '18:00', icon: '🏨', title: '抵達維克', drive: 10, stop: 0, notes: '入住 The Barn。', link: 'https://www.google.com/maps/place/The+Barn/@63.4215234,-19.0116898,17z/data=!3m1!4b1!4m6!3m5!1s0x48d63102c914e6b5:0x8797b5e43a941f71!8m2!3d63.4215234!4d-19.0091149!16s%2Fg%2F11gjw9n4f1?entry=ttu' }
        ]
    },
    {
        day: 4, date: '10/14 (一)', theme: '冰川健行與冰河湖',
        events: [
            { time: '08:45', icon: '🚀', title: '維克出發', drive: 0, stop: 0, notes: '務必提早出發，為中途的峽谷行程預留充足時間。' },
            { time: '09:45-11:15', icon: '🏞️', title: 'Fjaðrárgljúfur (羽毛峽谷)', drive: 60, stop: 90, notes: '步行即可輕鬆抵達觀景點。', link: 'https://www.google.com/maps/place/Fja%C3%B0r%C3%A1rglj%C3%BAfur/@63.7712316,-18.1718041,17z/data=!3m1!4b1!4m6!3m5!1s0x48d9aa178e6f1577:0x5e2365cf859942a0!8m2!3d63.7712316!4d-18.1692292!16s%2Fg%2F12275tgb?entry=ttu' },
            { time: '12:00', icon: '📍', title: '抵達斯卡夫塔費爾', drive: 45, stop: 0, notes: '直接前往 Glacier Guides 報到處。', link: 'https://www.google.com/maps/place/Skaftafell/@64.098485,-16.992641,17z/data=!3m1!4b1!4m6!3m5!1s0x48d98d25d1981245:0x2289c03823ce97f5!8m2!3d64.098485!4d-16.9900661!16s%2Fg%2F11bc51h14b?entry=ttu' },
            { time: '12:00-12:40', icon: '📋', title: '報到、領取裝備、簡報', drive: 0, stop: 40, notes: '必須在 12:40 前抵達！', link: 'https://www.google.com/maps/place/Glacier+Guides/@64.098485,-16.992641,17z/data=!3m1!4b1!4m6!3m5!1s0x48d98d264775d71b:0x8544d6df1b3433e5!8m2!3d64.098485!4d-16.9900661!16s%2Fg%2F11b5f7d1k9?entry=ttu' },
            { time: '13:00-17:00', icon: '🧊', title: '「Glacier Wonders」冰川健行', drive: 0, stop: 240, notes: '盡情享受冰川上的奇景。（可選自由活動）', link: 'https://www.google.com/maps/place/Skaftafell/@64.098485,-16.992641,17z/data=!3m1!4b1!4m6!3m5!1s0x48d98d25d1981245:0x2289c03823ce97f5!8m2!3d64.098485!4d-16.9900661!16s%2Fg%2F11bc51h14b?entry=ttu' },
            { time: '17:45', icon: '🏞️', title: '傑古沙龍冰河湖', drive: 45, stop: 45, notes: '冰川健行後，欣賞冰河湖的壯觀景色。', link: 'https://www.google.com/maps/place/J%C3%B6kuls%C3%A1rl%C3%B3n/@64.0732863,-16.2428178,17z/data=!3m1!4b1!4m6!3m5!1s0x48d9b139366d0309:0x89e088d8b4923180!8m2!3d64.0732863!4d-16.2402429!16s%2Fg%2F125p775w?entry=ttu' },
            { time: '17:50', icon: '💎', title: '鑽石沙灘', drive: 5, stop: 30, notes: '在黑沙灘上尋找閃閃發光的浮冰。', link: 'https://www.google.com/maps/place/Diamond+Beach/@64.0729793,-16.236675,17z/data=!3m1!4b1!4m6!3m5!1s0x48d9b136873b7f57:0x2289c03823ce97f5!8m2!3d64.0729793!4d-16.234099!16s%2Fg%2F11bc5211kb?entry=ttu' },
            { time: '18:30', icon: '🏨', title: '抵達 Hali 鄉村旅館', drive: 15, stop: 0, notes: '入住 Hali Country Hotel。', link: 'https://www.google.com/maps/place/Hali+Country+Hotel/@64.120794,-15.546342,17z/data=!3m1!4b1!4m6!3m5!1s0x48d9aa178e6f1577:0x5e2365cf859942a0!8m2!3d64.120794!4d-15.5437671!16s%2Fg%2F11bc5b172t?entry=ttu' }
        ]
    },
     {
        day: 5, date: '10/15 (二)', theme: '冰河船與東南岸',
        events: [
            { time: '09:00-16:00', icon: '🛶', title: '「Glacier Magic」冰川健行與冰河船', drive: 15, stop: 420, notes: '可於活動期間或結束後，在附近享用輕食或午餐。', link: 'https://www.google.com/maps/place/Glacier+Magic/@64.120794,-15.546342,17z/data=!3m1!4b1!4m6!3m5!1s0x48d9b6264d1f2741:0x2289c03823ce97f5!8m2!3d64.120794!4d-15.5437671!16s%2Fg%2F11b64g1234?entry=ttu' },
            { time: '16:30', icon: '🏨', title: '抵達霍夫 (Höfn)', drive: 60, stop: 0, notes: '入住 The Greyhouse，並在小鎮自由活動。', link: 'https://www.google.com/maps/place/The+Greyhouse/@64.253051,-15.2078656,17z/data=!3m1!4b1!4m6!3m5!1s0x48d61397b913d9a7:0x892a00c65d648f9!8m2!3d64.253051!4d-15.2052907!16s%2Fg%2F11j692v1m1?entry=ttu' }
        ]
    },
    {
        day: 6, date: '10/16 (三)', theme: '長途駕駛：從霍夫前往胡薩維克',
        events: [
            { time: '08:00', icon: '🚀', title: '霍夫出發', drive: 0, stop: 0, notes: '本日車程長，務必提早出發。' },
            { time: '08:45-09:45', icon: '🏔️', title: 'Vestrahorn (角山)', drive: 45, stop: 60, notes: '探索這個充滿戲劇性景觀的冰島地標。', link: 'https://www.google.com/maps/place/Vestrahorn/@64.249265,-14.970876,17z/data=!3m1!4b1!4m6!3m5!1s0x48d62634358a5f4f:0x39363574d6c4e09!8m2!3d64.249265!4d-14.968291!16s%2Fg%2F125p775w?entry=ttu' },
            { time: '15:00-16:30', icon: '💧', title: '黛提瀑布 (Dettifoss)', drive: 315, stop: 90, notes: '歐洲水量最大的瀑布，體驗其震撼的氣勢。', link: 'https://www.google.com/maps/place/Dettifoss/@65.8152336,-16.3986421,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd89e13a948c41:0x2289c03823ce97f5!8m2!3d65.8152336!4d-16.3960672!16s%2Fg%2F11b61c14q8?entry=ttu' },
            { time: '17:30', icon: '🏨', title: '抵達胡薩維克', drive: 60, stop: 0, notes: '入住您在胡薩維克的 Airbnb (Helluland 641)。', link: 'https://www.google.com/maps/place/Helluland+641,+640+H%C3%BAsav%C3%ADk,+Iceland/@66.048386,-17.348256,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd8e16979d35a1:0x2077e38a221f7360!8m2!3d66.048386!4d-17.3456811!16s%2Fg%2F11byx8t341?entry=ttu' }
        ]
    },
    {
        day: 7, date: '10/17 (四)', theme: '北部探索：米湖與眾神瀑布',
        events: [
            { time: '09:00', icon: '🚀', title: '胡薩維克出發', drive: 0, stop: 0, notes: '本日行程以深度探索米湖周邊為主。' },
            { time: '09:30-10:30', icon: '🌋', title: 'Víti 火山湖', drive: 30, stop: 60, notes: '前往火山口邊緣，欣賞其獨特的綠松石色湖水。', link: 'https://www.google.com/maps/place/Viti+Crater/@65.719601,-16.758362,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd8f9d020d53c7:0x2289c03823ce97f5!8m2!3d65.719601!4d-16.7557871!16s%2Fg%2F11c6j0p2r9?entry=ttu' },
            { time: '10:45-12:00', icon: '🌍', title: '米湖地熱區 & 黑色城堡', drive: 15, stop: 75, notes: '探索冒著蒸氣的地熱區和奇形怪狀的熔岩地貌。', link: 'https://www.google.com/maps/place/Myvatn+Nature+Baths/@65.6896264,-17.006935,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd84102d689b91:0x344f6f7b322521f1!8m2!3d65.6896264!4d-17.0043601!16s%2Fg%2F11b61c28c8?entry=ttu' },
            { time: '12:00-13:00', icon: '🍽️', title: '在雷恰利茲用午餐', drive: 0, stop: 60, notes: '在米湖湖邊的小鎮享用午餐。', link: 'https://www.google.com/maps/place/Reykjahlid/@65.631839,-16.923837,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd83d97d021665:0x2077e38a221f7360!8m2!3d65.631839!4d-16.9212621!16s%2Fg%2F12275tgb?entry=ttu' },
            { time: '13:15-14:45', icon: '♨️', title: '米湖溫泉', drive: 15, stop: 90, notes: '選擇性行程，可在此放鬆泡湯。', link: 'https://www.google.com/maps/place/Myvatn+Nature+Baths/@65.6896264,-17.006935,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd84102d689b91:0x344f6f7b322521f1!8m2!3d65.6896264!4d-17.0043601!16s%2Fg%2F11b61c28c8?entry=ttu' },
            { time: '15:15-16:15', icon: '💧', title: '眾神瀑布 (Goðafoss)', drive: 30, stop: 60, notes: '冰島最美的瀑布之一。', link: 'https://www.google.com/maps/place/Godafoss/@65.698946,-17.550181,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd8d8a7f0521e1:0x2289c03823ce97f5!8m2!3d65.698946!4d-17.5476061!16s%2Fg%2F125p775w?entry=ttu' },
            { time: '16:45', icon: '🏨', title: '抵達阿克雷里', drive: 30, stop: 0, notes: '入住 E18 Apartments。', link: 'https://www.google.com/maps/place/E18+Apartments/@65.683333,-18.090382,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd844f6f5b9d33:0x344f6f7b322521f1!8m2!3d65.683333!4d-18.0878071!16s%2Fg%2F11gjw9n4f1?entry=ttu' }
        ]
    },
    {
        day: 8, date: '10/18 (五)', theme: '西部冒險：前往斯奈山半島',
        events: [
            { time: '09:00', icon: '🚀', title: '阿克雷里出發', drive: 0, stop: 0, notes: '本日車程較長，沿途風光無限。' },
            { time: '11:00-12:00', icon: '🦏', title: 'Hvítserkur (犀牛岩)', drive: 120, stop: 60, notes: '觀賞這塊形狀獨特的岩石，有時能看到海豹。', link: 'https://www.google.com/maps/place/Hv%C3%ADtserkur/@65.608386,-20.627256,17z/data=!3m1!4b1!4m6!3m5!1s0x48d674b88f910411:0x5e022f4728556535!8m2!3d65.608386!4d-20.6246811!16s%2Fg%2F125p775w?entry=ttu' },
            { time: '14:00', icon: '🏨', title: '抵達布扎達呂爾住宿', drive: 120, stop: 60, notes: '入住城堡民宿 (Castle Guesthouse)，並用午餐。', link: 'https://www.google.com/maps/place/Castle+Guesthouse/@65.0934161,-21.848256,17z/data=!3m1!4b1!4m6!3m5!1s0x48d674b88f910411:0x5e022f4728556535!8m2!3d65.0934161!4d-21.8456811!16s%2Fg%2F11byx8t341?entry=ttu' }
        ]
    },
    {
        day: 9, date: '10/19 (六)', theme: '斯奈山半島環狀探索',
        events: [
            { time: '09:00', icon: '🚀', title: '布扎達呂爾出發', drive: 0, stop: 0, notes: '今天將完整環繞斯奈山半島。' },
            { time: '10:00-11:30', icon: '🏔️', title: '教堂山 (Kirkjufell)', drive: 60, stop: 90, notes: '冰島最上鏡的山峰。', link: 'https://www.google.com/maps/place/Kirkjufell/@64.927231,-23.308256,17z/data=!3m1!4b1!4m6!3m5!1s0x48d42d312c125d4f:0x5e022f4728556535!8m2!3d64.927231!4d-23.3056811!16s%2Fg%2F11b3w3432r?entry=ttu' },
            { time: '12:00-13:30', icon: '🏘️', title: '阿爾納斯塔皮 (Arnarstapi)', drive: 30, stop: 90, notes: '探索玄武岩峭壁與拱門，並在漁村用午餐。', link: 'https://www.google.com/maps/place/Arnarstapi/@64.7734161,-23.638256,17z/data=!3m1!4b1!4m6!3m5!1s0x48d424b91b8a5d4f:0x2077e38a221f7360!8m2!3d64.7734161!4d-23.6356811!16s%2Fg%2F11g4s6b33t?entry=ttu' },
            { time: '14:00-15:00', icon: '🏞️', title: '斯奈山冰川國家公園', drive: 30, stop: 60, notes: '感受這座壯觀冰川的宏偉氣勢。', link: 'https://www.google.com/maps/place/Sn%C3%A6fellsj%C3%B6kull+National+Park/@64.8329793,-23.771675,17z/data=!3m1!4b1!4m6!3m5!1s0x48d4077f98b6719b:0x5e022f4728556535!8m2!3d64.8329793!4d-23.769099!16s%2Fg%2F125p775w?entry=ttu' },
            { time: '15:30-16:30', icon: '🌊', title: 'Djúpalónssandur (黑沙灘)', drive: 30, stop: 60, notes: '探索獨特的黑沙灘，並嘗試挑戰力士之石。', link: 'https://www.google.com/maps/place/Dj%C3%BApal%C3%B3nssandur+Beach/@64.7729793,-23.956675,17z/data=!3m1!4b1!4m6!3m5!1s0x48d42a6c2f9d519b:0x89e088d8b4923180!8m2!3d64.7729793!4d-23.954099!16s%2Fg%2F11byx8t341?entry=ttu' },
            { time: '17:00', icon: '🏨', title: '抵達阿爾納斯塔皮住宿', drive: 30, stop: 0, notes: '入住 Grund。', link: 'https://www.google.com/maps/place/Arnarstapi+Center/@64.7734161,-23.638256,17z/data=!3m1!4b1!4m6!3m5!1s0x48d42a7c4f9d519b:0x2077e38a221f7360!8m2!3d64.7734161!4d-23.6356811!16s%2Fg%2F11byx8t341?entry=ttu' }
        ]
    },
    {
        day: 10, date: '10/20 (日)', theme: '返回雷克雅維克',
        events: [
            { time: '09:00', icon: '🚀', title: '阿爾納斯塔皮出發', drive: 0, stop: 0, notes: '開始返回雷克雅維克的路程。' },
            { time: '11:00-12:30', icon: '🏘️', title: '博爾加內斯 (Borgarnes)', drive: 120, stop: 90, notes: '在小鎮休息、用午餐。', link: 'https://www.google.com/maps/place/Borgarnes/@64.5429793,-21.921675,17z/data=!3m1!4b1!4m6!3m5!1s0x48d61397b913d9a7:0x892a00c65d648f9!8m2!3d64.5429793!4d-21.919099!16s%2Fg%2F11b61c21d8?entry=ttu' },
            { time: '14:00', icon: '🏨', title: '抵達雷克雅維克', drive: 90, stop: 0, notes: '入住奧丁斯維酒店 (Hotel Odinsve)。', link: 'https://www.google.com/maps/place/Hotel+Odinsve/@64.1458992,-21.9332039,15z/data=!3m1!4b1!4m6!3m5!1s0x48d674d8178a945d:0x221c57e50207b5a8!8m2!3d64.1466037!4d-21.9427047!16s%2Fg%2F11g4s6b33t?entry=ttu' },
            { time: '14:30', icon: '🛍️', title: '雷克雅維克市區自由活動', drive: 0, stop: 240, notes: '享受在市區的最後時光，購買紀念品或享受美食。', link: 'https://www.google.com/maps/place/%E9%9B%B7%E5%85%8B%E9%9B%85%E7%B6%AD%E5%85%8B%E5%B8%82%E4%B8%AD%E5%BF%83/@64.1458992,-21.9332039,15z/data=!3m1!4b1!4m6!3m5!1s0x48d674d8178a945d:0x221c57e50207b5a8!8m2!3d64.1466037!4d-21.9427047!16s%2Fg%2F11b61655h9?entry=ttu' }
        ]
    },
    {
        day: 11, date: '10/21 (一)', theme: '悠閒與返程',
        events: [
            { time: '上午', icon: '☕', title: '在雷克雅維克自由活動', drive: 0, stop: 180, notes: '睡到自然醒，在市區享用悠閒早餐。', link: 'https://www.google.com/maps/place/%E9%9B%B7%E5%85%8B%E9%9B%85%E7%B6%AD%E5%85%8B%E5%B8%82%E4%B8%AD%E5%BF%83/@64.1458992,-21.9332039,15z/data=!3m1!4b1!4m6!3m5!1s0x48d674d8178a945d:0x221c57e50207b5a8!8m2!3d64.1466037!4d-21.9427047!16s%2Fg%2F11b61655h9?entry=ttu' },
            { time: '12:00-14:00', icon: '♨️', title: 'Sky Lagoon', drive: 15, stop: 120, notes: '在回國前，再次體驗冰島獨特的溫泉。', link: 'https://www.google.com/maps/place/Sky+Lagoon/@64.1296541,-22.0287514,17z/data=!3m1!4b1!4m6!3m5!1s0x48d60c441a29f8f5:0x221c57e50207b5a8!8m2!3d64.1296541!4d-22.0261765!16s%2Fg%2F11b3t027g2?entry=ttu' },
            { time: '15:00', icon: '🛫', title: '前往凱夫拉維克國際機場 (KEF)', drive: 45, stop: 0, notes: '提早前往機場，準備還車。', link: 'https://www.google.com/maps/place/%E5%87%B1%E5%A4%AB%E6%8B%89%E7%B6%AD%E5%85%8B%E5%9C%8B%E9%9A%9B%E6%A9%9F%E5%A0%B4/@63.985958,-22.618693,17z/data=!3m1!4b1!4m6!3m5!1s0x48d60233b6647963:0xfe0139b4b0e5170d!8m2!3d63.985958!4d-22.616118!16zL20vMGNoNzJx?entry=ttu' },
            { time: '15:45', icon: '🚗', title: 'Blue Car Rental 還車', drive: 0, stop: 0, notes: '還車並辦理登機手續。', link: 'https://www.google.com/maps/place/Blue+Car+Rental/@63.9934161,-22.6247385,17z/data=!3m1!4b1!4m6!3m5!1s0x48d6021273946761:0x39775f4640d2d312!8m2!3d63.9934161!4d-22.6221636!16s%2Fg%2F11b65v70h9?entry=ttu' }
        ]
    }
];

const accommodationData = [
    { dates: '10/11-10/13', area: '雷克雅維克', name: 'AirBnb (Bergþórugata)', type: '整棟', price: '2439', link: 'https://www.google.com/maps/place/Berg%C3%BE%C3%B3rugata+35,+101+Reykjav%C3%ADk,+Iceland/@64.141528,-21.921312,17z/data=!3m1!4b1!4m6!3m5!1s0x48d674b88f910411:0x5e022f4728556535!8m2!3d64.141528!4d-21.9187371!16s%2Fg%2F11bxbt2s9l?entry=ttu' },
    { dates: '10/13-10/14', area: 'Vik', name: 'The Barn', type: '雙人房*1 + 6床房', price: '2899', link: 'https://www.google.com/maps/place/The+Barn/@63.4215234,-19.0116898,17z/data=!3m1!4b1!4m6!3m5!1s0x48d63102c914e6b5:0x8797b5e43a941f71!8m2!3d63.4215234!4d-19.0091149!16s%2Fg%2F11gjw9n4f1?entry=ttu' },
    { dates: '10/14-10/15', area: 'Hali', name: '哈利鄉村酒店', type: '雙人房*2 + 獨棟*2', price: '3472', link: 'https://www.google.com/maps/place/Hali+Country+Hotel/@64.120794,-15.546342,17z/data=!3m1!4b1!4m6!3m5!1s0x48d9aa178e6f1577:0x5e2365cf859942a0!8m2!3d64.120794!4d-15.5437671!16s%2Fg%2F11bc5b172t?entry=ttu' },
    { dates: '10/15-10/16', area: '赫本 Hofn', name: 'The Greyhouse', type: '整棟', price: '2361', link: 'https://www.google.com/maps/place/The+Greyhouse/@64.253051,-15.2078656,17z/data=!3m1!4b1!4m6!3m5!1s0x48d61397b913d9a7:0x892a00c65d648f9!8m2!3d64.253051!4d-15.2052907!16s%2Fg%2F11j692v1m1?entry=ttu' },
    { dates: '10/16-10/17', area: '胡薩維克', name: 'AirBnb (Helluland)', type: '整棟', price: '2040', link: 'https://www.google.com/maps/place/Helluland+641,+640+H%C3%BAsav%C3%ADk,+Iceland/@66.048386,-17.348256,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd8e16979d35a1:0x2077e38a221f7360!8m2!3d66.048386!4d-17.3456811!16s%2Fg%2F11byx8t341?entry=ttu' },
    { dates: '10/17-10/18', area: '阿克雷里', name: 'E18 Apartments', type: '四人房*2', price: '1594', link: 'https://www.google.com/maps/place/E18+Apartments/@65.683333,-18.090382,17z/data=!3m1!4b1!4m6!3m5!1s0x48cd844f6f5b9d33:0x344f6f7b322521f1!8m2!3d65.683333!4d-18.0878071!16s%2Fg%2F11gjw9n4f1?entry=ttu' },
    { dates: '10/18-10/19', area: '布扎達呂爾', name: '城堡民宿', type: '四人房+雙人房*2', price: '2454', link: 'https://www.google.com/maps/place/Castle+Guesthouse/@65.0934161,-21.848256,17z/data=!3m1!4b1!4m6!3m5!1s0x48d674b88f910411:0x5e022f4728556535!8m2!3d65.0934161!4d-21.8456811!16s%2Fg%2F11byx8t341?entry=ttu' },
    { dates: '10/19-10/20', area: '阿爾納斯塔皮', name: 'Grund', type: '整棟', price: '2078', link: 'https://www.google.com/maps/place/Arnarstapi+Center/@64.7734161,-23.638256,17z/data=!3m1!4b1!4m6!3m5!1s0x48d42a7c4f9d519b:0x2077e38a221f7360!8m2!3d64.7734161!4d-23.6356811!16s%2Fg%2F11byx8t341?entry=ttu' },
    { dates: '10/20-10/21', area: '雷克雅維克', name: '奧丁斯維酒店', type: '雙人房*4', price: '3553', link: 'https://www.google.com/maps/place/Hotel+Odinsve/@64.1458992,-21.9332039,15z/data=!3m1!4b1!4m6!3m5!1s0x48d674d8178a945d:0x221c57e50207b5a8!8m2!3d64.1466037!4d-21.9427047!16s%2Fg%2F11g4s6b33t?entry=ttu' },
];

const todoData = [
    { text: '🔥 租車 10/11-10/21', status: 'pending' },
    { text: '🔥 10/11 藍湖溫泉、10/17 米湖溫泉、10/21 Sky Lagoon', status: 'pending' },
    { text: '網卡、轉接頭', status: 'pending' },
    { text: '帶保冰袋、帶吃的', status: 'pending' },
    { text: '指派導航點負責人', status: 'pending' },
    { text: '指派停車費負責人', status: 'pending' },
    { text: '購買旅遊保險', status: 'pending' },
    { text: '準備應急醫療包', status: 'pending' },
    { text: '準備必要旅行文件 (身分證、護照)', status: 'pending' },
    { text: '研究並列出當地想嘗試的餐廳', status: 'pending' },
    { text: '✅ 冰川健行、藍冰洞與橡皮艇', status: 'done' },
    { text: '✅ 訂房', status: 'done' },
    { text: '✅ 買冰爪', status: 'done' }
];

const memoData = [
    '辦港簽',
    '換國際駕照 (浚鉉、璿哲)',
    '到時候一樣要帶著台灣駕照',
    '兌換美金或歐元紙鈔',
    '禦寒衣褲、手套、襪子、圍巾等',
    '泳衣 (溫泉用)',
    '建議準備：頸枕、保溫瓶、插座轉接頭、手機掛繩'
];


let chartInstance = null;
const dayDetailsContainer = document.getElementById('day-details');
const daySelectorContainer = document.getElementById('day-selector');
const accommodationTableBody = document.getElementById('accommodation-table-body');
const todoListContainer = document.getElementById('todo-list');
const memoListContainer = document.getElementById('memo-list');

function renderDay(dayIndex) {
    const dayData = itineraryData[dayIndex];
    if (!dayData) return;

    let totalDriveTime = 0;
    let totalStopTime = 0;

    dayData.events.forEach(event => {
        totalDriveTime += event.drive;
        totalStopTime += event.stop;
    });

    const totalKnownTime = totalDriveTime + totalStopTime;
    const remainingTime = 24 * 60 - totalKnownTime;
    const freeTime = remainingTime > 0 ? remainingTime : 0;
    
    const eventsHtml = dayData.events.map(event => `
        <div class="timeline-item relative pl-10 pb-10">
            <div class="timeline-icon absolute left-0 top-0 w-10 h-10 flex items-center justify-center bg-slate-100 rounded-full">
                <span class="text-xl">${event.icon}</span>
            </div>
            <div class="ml-4">
                <p class="font-bold text-sky-600">${event.time}</p>
                <h4 class="font-semibold text-lg text-slate-800">
                    <a href="${event.link}" target="_blank" class="hover:text-blue-600 hover:underline transition-colors">${event.title}</a>
                </h4>
                <p class="text-slate-500 text-sm mt-1">${event.notes}</p>
            </div>
        </div>
    `).join('');

    const route = dayData.events.map(e => e.title.split('(')[0].trim()).filter((t, i, arr) => arr.indexOf(t) === i);
    const routeHtml = `<div class="text-center text-slate-500 text-sm mb-6 flex flex-wrap justify-center items-center gap-2">${route.join(' <span class="text-sky-400 font-sans">→</span> ')}</div>`;

    dayDetailsContainer.innerHTML = `
        <div class="grid md:grid-cols-2 gap-8 items-start">
            <div>
                <h2 class="text-3xl font-bold mb-2 text-center md:text-left">${`第 ${dayData.day} 天: ${dayData.date}`}</h2>
                <p class="text-lg text-slate-500 mb-6 text-center md:text-left">${dayData.theme}</p>
                <div class="max-h-[500px] overflow-y-auto pr-4">${eventsHtml}</div>
            </div>
            <div class="mt-8 md:mt-0">
                 <h3 class="text-xl font-semibold text-center mb-4">每日時間分配 (分鐘)</h3>
                 <div class="chart-container">
                    <canvas id="day-chart"></canvas>
                </div>
            </div>
        </div>
    `;

    updateChart(totalDriveTime, totalStopTime, freeTime);
}

function updateChart(drive, stop, free) {
    const ctx = document.getElementById('day-chart');
    if (!ctx) return;

    if (chartInstance) {
        chartInstance.destroy();
    }

    chartInstance = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['🚗 開車', '🏞️ 觀光/活動', '🌙 休息/自由時間'],
            datasets: [{
                data: [drive, stop, free],
                backgroundColor: [
                    '#38bdf8', 
                    '#34d399',
                    '#f0f9ff' 
                ],
                borderColor: [
                    '#0ea5e9',
                    '#10b981',
                    '#e0f2fe'
                ],
                borderWidth: 1,
                hoverOffset: 4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed !== null) {
                                const hours = Math.floor(context.parsed / 60);
                                const minutes = context.parsed % 60;
                                label += `${hours} 小時 ${minutes} 分鐘`;
                            }
                            return label;
                        }
                    }
                }
            }
        }
    });
}

function setupDaySelectors() {
    itineraryData.forEach((dayData, index) => {
        const button = document.createElement('button');
        button.className = `day-btn px-4 py-2 rounded-lg font-semibold bg-slate-100 text-slate-600`;
        button.textContent = `第 ${dayData.day} 天`;
        button.dataset.dayIndex = index;
        if (index === 0) {
            button.classList.add('active');
        }
        button.addEventListener('click', () => {
            daySelectorContainer.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            dayDetailsContainer.style.opacity = 0;
            setTimeout(() => {
                renderDay(index);
                dayDetailsContainer.style.opacity = 1;
            }, 300);
        });
        daySelectorContainer.appendChild(button);
    });
}

function renderAccommodation() {
    accommodationTableBody.innerHTML = accommodationData.map(item => `
        <tr class="bg-white border-b hover:bg-slate-50">
            <td class="px-4 py-4 font-medium text-slate-900">${item.dates}</td>
            <td class="px-4 py-4">${item.area}</td>
            <td class="px-4 py-4 font-medium">
                <a href="${item.link}" target="_blank" class="hover:text-blue-600 hover:underline transition-colors">${item.name}</a>
            </td>
            <td class="px-4 py-4">${item.type}</td>
            <td class="px-4 py-4">${item.price}</td>
        </tr>
    `).join('');
}

function renderTodoAndMemo() {
    todoListContainer.innerHTML = todoData.map(item => `
        <li class="flex items-center">
            <span class="mr-3 text-lg">${item.status === 'done' ? '✅' : '⏳'}</span>
            <span class="${item.status === 'done' ? 'line-through text-slate-400' : ''}">${item.text}</span>
        </li>
    `).join('');

    memoListContainer.innerHTML = memoData.map(item => `
        <li class="flex items-start">
            <span class="mr-3 text-sky-500 mt-1">♦️</span>
            <span>${item}</span>
        </li>
    `).join('');
}

function setupNav() {
    const navButtons = document.querySelectorAll('.nav-btn');
    const views = document.querySelectorAll('.view');
    navButtons.forEach(button => {
        button.addEventListener('click', () => {
            navButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            const viewId = button.dataset.view + '-view';
            views.forEach(view => {
                if (view.id === viewId) {
                    view.classList.add('active');
                } else {
                    view.classList.remove('active');
                }
            });
        });
    });
}

document.addEventListener('DOMContentLoaded', () => {
    setupNav();
    setupDaySelectors();
    renderDay(0);
    renderAccommodation();
    renderTodoAndMemo();
});

</script>
</body>
</html>
